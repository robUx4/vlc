DLL libvlccore
{
  OUTPUT_DIR src
  USE coremake_automake

  USE fourcc_tables.h
  USE compat
  USE iconv
  
  INCLUDE ../include

  SOURCE libvlc.c
  HEADER libvlc.h
  SOURCE libvlc-module.c
  SOURCE missing.c
  SOURCE revision.c
  SOURCE version.c
  HEADER config/configuration.h
  SOURCE config/core.c
  SOURCE config/chain.c
  SOURCE config/file.c
  SOURCE config/help.c
  SOURCE config/intf.c
  SOURCE config/keys.c
  SOURCE config/cmdline.c
  SOURCE config/getopt.c
  HEADER config/vlc_getopt.h
  SOURCE extras/libc.c
  SOURCE extras/tdestroy.c
  HEADER modules/modules.h
  SOURCE modules/modules.c
  SOURCE modules/bank.c
  SOURCE modules/cache.c
  SOURCE modules/entry.c
  SOURCE modules/textdomain.c
  SOURCE interface/dialog.c
  SOURCE interface/interface.c
  HEADER playlist/playlist_internal.h
  SOURCE playlist/art.c
  HEADER playlist/art.h
  SOURCE playlist/aout.c
  SOURCE playlist/thread.c
  SOURCE playlist/control.c
  SOURCE playlist/engine.c
  SOURCE playlist/fetcher.c
  HEADER playlist/fetcher.h
  SOURCE playlist/sort.c
  SOURCE playlist/loadsave.c
  SOURCE playlist/preparser.c
  HEADER playlist/preparser.h
  SOURCE playlist/tree.c
  SOURCE playlist/item.c
  SOURCE playlist/search.c
  SOURCE playlist/services_discovery.c
  SOURCE input/item.c
  SOURCE input/access.c
  SOURCE input/clock.c
  SOURCE input/control.c
  SOURCE input/decoder.c
  SOURCE input/decoder_synchro.c
  SOURCE input/demux.c
  SOURCE input/demux_chained.c
  SOURCE input/es_out.c
  SOURCE input/es_out_timeshift.c
  SOURCE input/event.c
  SOURCE input/input.c
  HEADER input/info.h
  SOURCE input/meta.c
  HEADER input/clock.h
  HEADER input/decoder.h
  HEADER input/demux.h
  HEADER input/es_out.h
  HEADER input/es_out_timeshift.h
  HEADER input/event.h
  HEADER input/item.h
  HEADER input/mrl_helpers.h
  HEADER input/stream.h
  HEADER input/input_internal.h
  HEADER input/input_interface.h
  HEADER input/vlm_internal.h
  HEADER input/vlm_event.h
  HEADER input/resource.h
  SOURCE input/resource.c
  SOURCE input/services_discovery.c
  SOURCE input/stats.c
  SOURCE input/stream.c
  SOURCE input/stream_fifo.c
  SOURCE input/stream_extractor.c
  SOURCE input/stream_filter.c
  SOURCE input/stream_memory.c
  SOURCE input/subtitles.c
  SOURCE input/var.c
  HEADER audio_output/aout_internal.h
  SOURCE audio_output/common.c
  SOURCE audio_output/dec.c
  SOURCE audio_output/filters.c
  SOURCE audio_output/output.c
  SOURCE audio_output/volume.c
  HEADER video_output/chrono.h
  SOURCE video_output/control.c
  HEADER video_output/control.h
  SOURCE video_output/display.c
  HEADER video_output/display.h
  HEADER video_output/event.h
  SOURCE video_output/inhibit.c
  HEADER video_output/inhibit.h
  SOURCE video_output/interlacing.c
  HEADER video_output/interlacing.h
  SOURCE video_output/snapshot.c
  HEADER video_output/snapshot.h
  HEADER video_output/statistic.h
  SOURCE video_output/video_output.c
  SOURCE video_output/video_text.c
  SOURCE video_output/video_epg.c
  SOURCE video_output/video_widgets.c
  SOURCE video_output/vout_subpictures.c
  SOURCE video_output/window.c
  HEADER video_output/window.h
  SOURCE video_output/opengl.c
  SOURCE video_output/vout_intf.c
  HEADER video_output/vout_internal.h
  HEADER video_output/vout_control.h
  SOURCE video_output/vout_wrapper.c
  SOURCE network/getaddrinfo.c
  SOURCE network/http_auth.c
  SOURCE network/io.c
  SOURCE network/tcp.c
  SOURCE network/udp.c
  SOURCE network/rootbind.c
  SOURCE network/tls.c
  SOURCE text/charset.c
  SOURCE text/memstream.c
  SOURCE text/strings.c
  SOURCE text/unicode.c
  SOURCE text/url.c
  SOURCE text/filesystem.c
  SOURCE text/iso_lang.c
  HEADER text/iso-639_def.h
  SOURCE misc/md5.c
  SOURCE misc/probe.c
  SOURCE misc/rand.c
  SOURCE misc/mtime.c
  SOURCE misc/block.c
  SOURCE misc/fifo.c
  SOURCE misc/fourcc.c
  HEADER misc/fourcc_list.h
  SOURCE misc/es_format.c
  SOURCE misc/picture.c
  HEADER misc/picture.h
  SOURCE misc/picture_fifo.c
  SOURCE misc/picture_pool.c
  HEADER misc/interrupt.h
  SOURCE misc/interrupt.c
  SOURCE misc/keystore.c
  SOURCE misc/renderer_discovery.c
  SOURCE misc/threads.c
  SOURCE misc/cpu.c
  SOURCE misc/epg.c
  SOURCE misc/exit.c
  SOURCE misc/events.c
  SOURCE misc/image.c
  SOURCE misc/messages.c
  SOURCE misc/mime.c
  SOURCE misc/objects.c
  HEADER misc/variables.h
  SOURCE misc/variables.c
  SOURCE misc/error.c
  SOURCE misc/xml.c
  SOURCE misc/addons.c
  SOURCE misc/filter.c
  SOURCE misc/filter_chain.c
  SOURCE misc/httpcookies.c
  SOURCE misc/fingerprinter.c
  SOURCE misc/text_style.c
  SOURCE misc/subpicture.c
  HEADER misc/subpicture.h
  
  IF ENABLE_SOUT
    SOURCE stream_output/sap.c
    SOURCE stream_output/sdp.c
    SOURCE stream_output/stream_output.c
    HEADER stream_output/stream_output.h
  ENDIF
  
  IF ENABLE_VLM
    SOURCE input/vlm.c
    SOURCE input/vlm_event.c
    SOURCE input/vlmshell.c
  ENDIF
  
  IF TARGET_WIN
    INCLUDE ../extras/package/win32
    LIBS shell32.lib
    LIBS ws2_32.lib
    LIBS winmm.lib
    LIBS(!WINSTORE_APP) advapi32.lib
    LIBS(!WINSTORE_APP) user32.lib

    SOURCEAM(!COMPILER_MSVC) libvlc_win32_rc.rc.in
    SOURCE win32/dirs.c
    SOURCE win32/error.c
    SOURCE win32/filesystem.c
    SOURCE win32/netconf.c
    SOURCE win32/plugin.c
    SOURCE win32/rand.c
    SOURCE win32/specific.c
    SOURCE win32/thread.c
    SOURCE win32/winsock.c
    IF HAVE_WINSTORE
      SOURCE posix/timer.c
    ELSE
      SOURCE win32/timer.c
    ENDIF
  ENDIF
}

CON fourcc_gen
{
  OUTPUT_DIR src
  INCLUDE .

  SOURCE misc/fourcc_gen.c
  HEADER misc/fourcc_list.h
  HEADER ../include/vlc_fourcc.h
}

GENERATE fourcc_tables.h
{
  OUTPUT_DIR src

  DEP fourcc_gen
  RUN "fourcc_gen > fourcc_tables.h"
}
